---
interface Props {
  current: number
  comparisons: { name: string; value: number }[]
  title?: string
  unit?: string
}

const { current, comparisons, title, unit = '' } = Astro.props
const max = Math.max(current, ...comparisons.map(c => c.value))
---

<div class="comparison-chart my-8">
  {title && <h3 class="text-lg font-semibold mb-4 text-slate-200">{title}</h3>}
  <div class="space-y-3">
    {comparisons.map((item) => {
      const percentage = (item.value / max) * 100
      const isCurrent = item.value === current
      return (
        <div class="space-y-1">
          <div class="flex items-center justify-between text-sm">
            <span class={isCurrent ? 'font-semibold text-brand' : 'text-slate-300'}>
              {item.name} {isCurrent && '(This Tool)'}
            </span>
            <span class="text-slate-400">{item.value}{unit}</span>
          </div>
          <div class="h-2 bg-slate-800 rounded-full overflow-hidden">
            <div 
              class={`h-full rounded-full transition-all ${isCurrent ? 'bg-brand' : 'bg-slate-600'}`}
              style={`width: ${percentage}%`}
            />
          </div>
        </div>
      )
    })}
  </div>
</div>
