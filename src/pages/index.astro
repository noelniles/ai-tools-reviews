---
import { getCollection } from 'astro:content'
import BaseLayout from '../layouts/BaseLayout.astro'
import Nav from '../components/Nav.astro'
import ReviewCard from '../components/ReviewCard.astro'
import HeroBanner from '../components/HeroBanner.astro'
import ROICalculator from '../components/ROICalculator.astro'

const reviews = await getCollection('reviews')
const sorted = reviews.sort(
  (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
)
---

<BaseLayout>
  <Nav />

  <section class="space-y-8">
    <!-- Hero Banner with ROI Focus -->
    <HeroBanner />
    
    <!-- ROI Calculator -->
    <ROICalculator />

    <section class="grid gap-4 md:grid-cols-2">
      {sorted.map((review) => (
        <ReviewCard review={review} />
      ))}
    </section>
  </section>
</BaseLayout>
